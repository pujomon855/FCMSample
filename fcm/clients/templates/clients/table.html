{% extends 'clients/base.html' %}

{% block title %}Client Table{% endblock %}

{% block head %}
    <script type="text/javascript">
        'use strict';
        $(function() {
            // Setup - add a text input to each footer cell
            $('#client-table tfoot th').each(function() {
                let title = $(this).text();
                $(this).html('<input type="text" placeholder="Search ' + title + '" />');
            });

            // DataTable
            let table = $('#client-table').DataTable();

            // Apply the search
            table.columns().every(function() {
                let that = this;

                $('input', this.footer()).on('keyup change clear', function() {
                    if (that.search() !== this.value) {
                        that
                            .search(this.value)
                            .draw();
                    }
                });
            });

            // Move the search to header
            $('#client-table tfoot tr').appendTo('#client-table thead');
        });
    </script>
{% endblock %}

{% block contents %}
    <table id="client-table" border="1">
        <thead>
            <tr>
                <th>name</th>
                <th>session</th>
                <th>session_start_end</th>
                <th>code</th>
                <th>products</th>
            </tr>
        </thead>
        <tbody>
            {% if client_list %}
                {% for client in client_list %}
                    <tr>
                        <td><a href="{% url 'clients:detail' client.id %}">{{ client.name }}</a></td>
                        <td>{{ client.session }}</td>
                        <td>{{ client.session_start_end }}</td>
                        <td>{{ client.code }}</td>
                        <td>{{ client.products }}</td>
                    </tr>
                {% endfor %}
            {% endif %}
        </tbody>
        <tfoot>
            <tr>
                <th>name</th>
                <th>session</th>
                <th>session_start_end</th>
                <th>code</th>
                <th>products</th>
            </tr>
        </tfoot>
    </table>
{% endblock %}
